"use strict";(()=>{var e={};e.id=1924,e.ids=[1924],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},48784:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>P,patchFetch:()=>T,requestAsyncStorage:()=>O,routeModule:()=>I,serverHooks:()=>m,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>S});var n={};r.r(n),r.d(n,{DELETE:()=>l,PATCH:()=>d});var s=r(26040),i=r(7623),o=r(52816),a=r(56439),_=r(44132),c=r(75409),p=r(84808);let u=_.Ry({title:_.Z_().min(3).max(128).optional(),content:_.Yj().optional()}),E=_.Ry({params:_.Ry({postId:_.Z_()})});async function l(e,t){try{let{params:e}=E.parse(t);if(!await R(e.postId))return new Response(null,{status:403});return await p.db.post.delete({where:{id:e.postId}}),new Response(null,{status:204})}catch(e){if(e instanceof _.jm)return new Response(JSON.stringify(e.issues),{status:422});return new Response(null,{status:500})}}async function d(e,t){try{let{params:r}=E.parse(t);if(!await R(r.postId))return new Response(null,{status:403});let n=await e.json(),s=u.parse(n);return await p.db.post.update({where:{id:r.postId},data:{title:s.title,content:s.content}}),new Response(null,{status:200})}catch(e){if(e instanceof _.jm)return new Response(JSON.stringify(e.issues),{status:422});return new Response(null,{status:500})}}async function R(e){let t=await (0,a.getServerSession)(c.L);return await p.db.post.count({where:{id:e,authorId:t?.user.id}})>0}let I=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/posts/[postId]/route",pathname:"/api/posts/[postId]",filename:"route",bundlePath:"app/api/posts/[postId]/route"},resolvedPagePath:"/Users/morganfuller/Documents/Invoke/ReelSearch/temp/ReelSearch/app/api/posts/[postId]/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:O,staticGenerationAsyncStorage:v,serverHooks:m,headerHooks:f,staticGenerationBailout:S}=I,P="/api/posts/[postId]/route";function T(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:v})}},47980:(e,t,r)=>{r.d(t,{O:()=>i});var n=r(7487),s=r(44132);let i=(0,n.D)({server:{apiKey:s.z.string().min(1),appId:s.z.string().min(1),auth_provider_x509_cert_url:s.z.string().min(1),auth_uri:s.z.string().min(1),authDomain:s.z.string().min(1),client_email:s.z.string().min(1),client_id:s.z.string().min(1),client_x509_cert_url:s.z.string().min(1),DATABASE_URL:s.z.string().min(1),GOOGLE_CLIENT_ID:s.z.string().min(1),GOOGLE_CLIENT_SECRET:s.z.string().min(1),measurementId:s.z.string().min(1),messagingSenderId:s.z.string().min(1),NEXT_PUBLIC_APP_URL:s.z.string().min(1),NEXT_PUBLIC_FACEBOOK_PIXEL_ID:s.z.string().min(1),NEXTAUTH_SECRET:s.z.string().min(1),NEXTAUTH_URL:s.z.string().url().optional(),OPENAI_API_KEY:s.z.string().min(1),OPENAI_ORG_ID:s.z.string().min(1),PINECONE_KEY:s.z.string().min(1),private_key:s.z.string().min(1),private_key_id:s.z.string().min(1),FACEBOOKCONVTOKEN:s.z.string().min(1),projectId:s.z.string().min(1),storageBucket:s.z.string().min(1),STRIPE_API_KEY:s.z.string().min(1),STRIPE_PRO_MONTHLY_PLAN_ID:s.z.string().min(1),STRIPE_WEBHOOK_SECRET:s.z.string().min(1),token_uri:s.z.string().min(1),type:s.z.string().min(1),universe_domain:s.z.string().min(1),EMAIL_SERVER_USER:s.z.string().min(1),EMAIL_SERVER_PASSWORD:s.z.string().min(1),EMAIL_SERVER_HOST:s.z.string().min(1),EMAIL_SERVER_PORT:s.z.string().min(1),EMAIL_FROM:s.z.string().min(1)},client:{NEXT_PUBLIC_APP_URL:s.z.string().min(1)},runtimeEnv:{apiKey:process.env.apiKey,appId:process.env.appId,auth_provider_x509_cert_url:process.env.auth_provider_x509_cert_url,auth_uri:process.env.auth_uri,authDomain:process.env.authDomain,client_email:process.env.client_email,client_id:process.env.client_id,client_x509_cert_url:process.env.client_x509_cert_url,DATABASE_URL:process.env.DATABASE_URL,GOOGLE_CLIENT_ID:process.env.GOOGLE_CLIENT_ID,GOOGLE_CLIENT_SECRET:process.env.GOOGLE_CLIENT_SECRET,measurementId:process.env.measurementId,messagingSenderId:process.env.messagingSenderId,NEXT_PUBLIC_APP_URL:"http://localhost:3000",NEXT_PUBLIC_FACEBOOK_PIXEL_ID:"877663831030809",NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,NEXTAUTH_URL:process.env.NEXTAUTH_URL,OPENAI_API_KEY:process.env.OPENAI_API_KEY,OPENAI_ORG_ID:process.env.OPENAI_ORG_ID,PINECONE_KEY:process.env.PINECONE_KEY,private_key:process.env.private_key,private_key_id:process.env.FACEBOOKCONVTOKEN,FACEBOOKCONVTOKEN:process.env.PINECONE_KEY,projectId:process.env.projectId,storageBucket:process.env.storageBucket,STRIPE_API_KEY:process.env.STRIPE_API_KEY,STRIPE_PRO_MONTHLY_PLAN_ID:process.env.STRIPE_PRO_MONTHLY_PLAN_ID,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,token_uri:process.env.token_uri,type:process.env.type,universe_domain:process.env.universe_domain,NEXTAUTH_URL:process.env.NEXTAUTH_URL,NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET,DATABASE_URL:process.env.DATABASE_URL,STRIPE_API_KEY:process.env.STRIPE_API_KEY,STRIPE_WEBHOOK_SECRET:process.env.STRIPE_WEBHOOK_SECRET,STRIPE_PRO_MONTHLY_PLAN_ID:process.env.STRIPE_PRO_MONTHLY_PLAN_ID,NEXT_PUBLIC_APP_URL:"http://localhost:3000",GOOGLE_CLIENT_ID:process.env.GOOGLE_CLIENT_ID,GOOGLE_CLIENT_SECRET:process.env.GOOGLE_CLIENT_SECRET,NEXT_PUBLIC_FACEBOOK_PIXEL_ID:"877663831030809",EMAIL_SERVER_USER:process.env.EMAIL_SERVER_USER,EMAIL_SERVER_PASSWORD:process.env.EMAIL_SERVER_PASSWORD,EMAIL_SERVER_HOST:process.env.EMAIL_SERVER_PASSWORD,EMAIL_SERVER_PORT:process.env.EMAIL_SERVER_PASSWORD,EMAIL_FROM:process.env.EMAIL_SERVER_PASSWORD}})},75409:(e,t,r)=>{r.d(t,{L:()=>c});var n=r(5100),s=r(60318),i=r(18110),o=r(54124),a=r(47980),_=r(84808);(0,o.createTransport)({host:process.env.EMAIL_SERVER_HOST,port:process.env.EMAIL_SERVER_PORT,secure:!0,auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}});let c={adapter:(0,n.N)(_.db),session:{strategy:"jwt"},pages:{signIn:"/login"},providers:[(0,i.Z)({clientId:a.O.GOOGLE_CLIENT_ID,clientSecret:a.O.GOOGLE_CLIENT_SECRET,allowDangerousEmailAccountLinking:!0}),(0,s.Z)({server:{host:process.env.EMAIL_SERVER_HOST,port:process.env.EMAIL_SERVER_PORT,auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM,sendVerificationRequest:async({identifier:e,url:t,provider:r})=>{let{server:n,from:s}=r,i=(0,o.createTransport)(n),a={to:e,from:s,subject:`Sign in to ${process.env.NEXTAUTH_URL}`,text:`Sign in to ${process.env.NEXTAUTH_URL}
${t}

`,html:`<p>Sign in to <strong>${process.env.NEXTAUTH_URL}</strong></p><p><a href="${t}">Click here to sign in</a></p>`};await i.sendMail(a)}})],callbacks:{session:async({token:e,session:t})=>(e&&(t.user.id=e.id,t.user.name=e.name,t.user.email=e.email,t.user.image=e.picture,t.user.fleetMemberships=e.fleetMemberships),t),async jwt({token:e,user:t}){let r=await _.db.user.findFirst({where:{email:e.email},include:{fleetMemberships:{select:{id:!0,fleet:{select:{name:!0,id:!0}}}}}});return r?{id:r.id,name:r.name,email:r.email,picture:r.image,fleetMemberships:r.fleetMemberships}:(t&&(e.id=t?.id),e)}}}},84808:(e,t,r)=>{r.d(t,{db:()=>n});let n=new(r(53524)).PrismaClient},7487:(e,t,r)=>{r.d(t,{D:()=>s});var n=r(44132);function s({runtimeEnv:e,...t}){return function(e){let t=e.runtimeEnvStrict??e.runtimeEnv??process.env;if(e.skipValidation??(!!process.env.SKIP_ENV_VALIDATION&&"false"!==process.env.SKIP_ENV_VALIDATION&&"0"!==process.env.SKIP_ENV_VALIDATION))return t;let r="object"==typeof e.client?e.client:{},s=n.ZP.object(r),i=n.ZP.object(e.server),o=e.isServer??!0,a=i.merge(s),_=o?a.safeParse(t):s.safeParse(t),c=e.onValidationError??(e=>{throw console.error("❌ Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")}),p=e.onInvalidAccess??(e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});return!1===_.success?c(_.error):new Proxy(_.data,{get(t,r){if("string"==typeof r)return o||r.startsWith(e.clientPrefix)?t[r]:p(r)}})}({...t,clientPrefix:"NEXT_PUBLIC_",runtimeEnvStrict:e})}},25775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},56439:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var s=r(25775);Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(41912));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},36666:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DYNAMIC_ERROR_CODE:function(){return r},DynamicServerError:function(){return n}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=r}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},34113:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"staticGenerationBailout",{enumerable:!0,get:function(){return a}});let n=r(36666),s=r(45869);class i extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function o(e,t){let{dynamic:r,link:n}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let a=(e,t)=>{let{dynamic:r,link:a}=void 0===t?{}:t,_=s.staticGenerationAsyncStorage.getStore();if(!_)return!1;if(_.forceStatic)return!0;if(_.dynamicShouldError)throw new i(o(e,{link:a,dynamic:null!=r?r:"error"}));let c=o(e,{dynamic:r,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==_.postpone||_.postpone.call(_,e),_.revalidate=0,_.isStaticGeneration){let t=new n.DynamicServerError(c);throw _.dynamicUsageDescription=e,_.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26040:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[5046,4132,3613,4539],()=>r(48784));module.exports=n})();